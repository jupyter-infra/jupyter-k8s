---
apiVersion: workspace.jupyter.org/v1alpha1
kind: WorkspaceTemplate
metadata:
  name: restricted-template
spec:
  displayName: "Restricted Data Science Template"
  description: "Template with strict resource and image restrictions"
  defaultImage: "quay.io/jupyter/datascience-notebook:latest"
  defaultOwnershipType: Public
  allowedImages:
    - "quay.io/jupyter/datascience-notebook:latest"
    - "quay.io/jupyter/minimal-notebook:latest"
  defaultResources:
    requests:
      cpu: "500m"
      memory: "1Gi"
    limits:
      cpu: "1"
      memory: "2Gi"
  resourceBounds:
    resources:
      cpu:
        min: "250m"
        max: "2"
      memory:
        min: "512Mi"
        max: "4Gi"
  primaryStorage:
    defaultSize: 5Gi
    minSize: 1Gi
    maxSize: 20Gi

---
apiVersion: workspace.jupyter.org/v1alpha1
kind: Workspace
metadata:
  name: test-rejected-workspace
  namespace: default
spec:
  displayName: "Test Rejected Workspace"
  desiredStatus: Running
  templateRef:
    name: "restricted-template"
  image: "tensorflow/tensorflow:latest-gpu-jupyter"
  ownershipType: Public
  resources:
    requests:
      cpu: "4"
      memory: "8Gi"
    limits:
      cpu: "8"
      memory: "16Gi"
  storage:
    size: "50Gi"

---
apiVersion: workspace.jupyter.org/v1alpha1
kind: Workspace
metadata:
  name: test-valid-workspace
  namespace: default
spec:
  displayName: "Test Valid Workspace"
  desiredStatus: Running
  templateRef:
    name: "restricted-template"
  image: "quay.io/jupyter/minimal-notebook:latest"
  ownershipType: Public
  resources:
    requests:
      cpu: "250m"
      memory: "512Mi"
    limits:
      cpu: "500m"
      memory: "1Gi"
  storage:
    size: "1Gi"
