# [MANAGER]: Manager Deployment Configurations
controllerManager:
  replicas: 1
  container:
    env:
      CLUSTER_ADMIN_GROUP: "cluster-workspace-admin"
      CLUSTER_ID: ""
    image:
      repository: controller
      tag: latest
    imagePullPolicy: IfNotPresent
    args:
      - "--leader-elect"
      - "--metrics-bind-address=:8443"
      - "--health-probe-bind-address=:8081"
    resources:
      limits:
        cpu: 500m
        memory: 128Mi
      requests:
        cpu: 10m
        memory: 64Mi
    livenessProbe:
      initialDelaySeconds: 15
      periodSeconds: 20
      httpGet:
        path: /healthz
        port: 8081
    readinessProbe:
      initialDelaySeconds: 5
      periodSeconds: 10
      httpGet:
        path: /readyz
        port: 8081
    securityContext:
      allowPrivilegeEscalation: false
      capabilities:
        drop:
          - "ALL"
  securityContext:
    runAsNonRoot: true
    seccompProfile:
      type: RuntimeDefault
  terminationGracePeriodSeconds: 10
  serviceAccountName: jupyter-k8s-controller-manager

  # Controller pod scheduling configuration
  nodeSelector: {}
  tolerations: []
  affinity: {}
  topologySpreadConstraints: []
  # PodDisruptionBudget configuration
  podDisruptionBudget:
    enabled: false
    minAvailable: null
    maxUnavailable: null
  # Pod metadata configuration (kubebuilder convention)
  pod:
    labels: {}
    annotations: {}

# [RBAC]: To enable RBAC (Permissions) configurations
rbac:
  enable: true

# [CRDs]: To enable the CRDs
crd:
  # This option determines whether the CRDs are included
  # in the installation process.
  enable: true

  # Enabling this option adds the "helm.sh/resource-policy": keep
  # annotation to the CRD, ensuring it remains installed even when
  # the Helm release is uninstalled.
  # NOTE: Removing the CRDs will also remove all cert-manager CR(s)
  # (Certificates, Issuers, ...) due to garbage collection.
  keep: true

# [METRICS]: Set to true to generate manifests for exporting metrics.
# To disable metrics export set false, and ensure that the
# ControllerManager argument "--metrics-bind-address=:8443" is removed.
metrics:
  enable: true

# [WEBHOOKS]: Webhooks configuration
# The following configuration is automatically generated from the manifests
# generated by controller-gen. To update run 'make manifests' and
# the edit command with the '--force' flag
webhook:
  enable: true

# [PROMETHEUS]: To enable a ServiceMonitor to export metrics to Prometheus set true
prometheus:
  enable: false

# [CERT-MANAGER]: To enable cert-manager injection to webhooks set true
certmanager:
  enable: true

# [NETWORK POLICIES]: To enable NetworkPolicies set true
networkPolicy:
  enable: false
# [APPLICATION]: Application images configuration
application:
  # Image pull policy for Workspaces deployments (Always, IfNotPresent, or Never)
  imagesPullPolicy: IfNotPresent
  # Image registry for Workspaces controller
  imagesRegistry: "docker.io/library"

# [WORKSPACE TEMPLATES]: Default workspace template configuration
workspaceTemplates:
  # Default namespace where workspace templates are stored
  defaultNamespace: "jupyter-k8s-shared"

# [WORKSPACE POD WATCHING]: Configure workspace pod event watching
workspacePodWatching:
  # Whether to enable workspace pod event watching
  # When true, controller watches pod events for workspace lifecycle management
  # When false, pod watching is disabled
  enable: false  # Default: false (disabled by default)

# [ACCESS RESOURCES]: Configure resources to watch for access strategy
# Additional access resources that the controller should watch
accessResources:
  # Guided mode using traefik proxy
  traefik:
    # Whether to enable watching traefik resources
    enable: false
  # Additional Group-Version-Kind to watch
  additionalGvk: []

# [EXTENSION_API]: Extension API server configuration  
extensionApi:
  # Enable extension API server for WorkspaceConnection
  enable: true
